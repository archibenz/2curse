# Расчёт варианта 7 (работа «Нормирование загрязняющих веществ в почве»)
# Шаги следуют в точности методическим указаниям из PDF

# ------------------------- Исходные данные -------------------------
S_ha = 1.1                         # площадь участка, га  (табл. стр. 2)
H = 0.25                           # мощность слоя, м     (табл. стр. 2)
rho_p = 1.56                       # плотность почвы, т/м³ (табл. стр. 2)

# фоновые концентрации, мг/кг  (табл. стр. 2)
C_f = dict(Cu=0.80, Mn=350, V=110, NO3=60)

# содержание в осадке, г/м³   (табл. стр. 2)
C_sludge_g_m3 = dict(Cu=20, Mn=2200, V=1100, NO3=900)

rho_s = 1.22                       # плотность осадка, т/м³ (табл. стр. 2)

# ПДК, мг/кг (таблица ПДК на стр. 5)
PDK = dict(Cu=3.0, Mn=1000, V=150, NO3=130)

# ------------------------- Шаг 1. Концентрация в 1 кг осадка -------------------------
# C_os = C (г/м³) / ρос  → мг/кг
C_os = {k: C_sludge_g_m3[k] / rho_s for k in C_sludge_g_m3}

# ------------------------- Шаг 2. Масса плодородного слоя -------------------------
S_m2 = S_ha * 10_000               # перевод га → м²
M_t = H * S_m2 * rho_p             # т
M = M_t * 1000                     # кг

# ------------------------- Шаг 3. Максимально допустимая масса осадка для каждого компонента -------------------------
# формула из методички: m_i = M (ПДК – Cф) / (Cос – ПДК)
m_i = {k: M * (PDK[k] - C_f[k]) / (C_os[k] - PDK[k]) for k in PDK}

# ------------------------- Шаг 4. Выбираем минимальное значение -------------------------
m_allowed = min(m_i.values())      # кг

# ------------------------- Шаг 5. Объём осадка -------------------------
V_m3 = m_allowed / (rho_s * 1000)  # м³

# ------------------------- Шаг 6. Высота слоя осадка -------------------------
h_m = V_m3 / S_m2                  # м
# ------------------------- расчёт концентраций после смешивания (для вывода) -------------------------
C_sm = {k: (C_f[k]*M + C_os[k]*m_allowed) / (M + m_allowed) for k in PDK}

# ------------------------- Шаг 7. Концентрации после смешивания -------------------------
print("Исходные данные:")
print(f"  Площадь участка S          = {S_ha} га  ({S_m2:.0f} м²)")
print(f"  Мощность плодородного слоя H = {H} м")
print(f"  Плотность почвы ρп         = {rho_p} т/м³")
print(f"  Плотность осадка ρос       = {rho_s} т/м³\n")

print("Фоновые концентрации Cф (мг/кг):")
for k in C_f:
    print(f"  {k:4}: {C_f[k]:>8}")

print("\nСодержание веществ в осадке C (г/м³):")
for k in C_sludge_g_m3:
    print(f"  {k:4}: {C_sludge_g_m3[k]:>8}")

print("\n--- Расчётная часть ---")
print(f"Масса плодородного слоя M         = {M/1000:.2f} т")
print("Максимально допустимая масса осадка m_i (кг):")
for k in m_i:
    print(f"  {k:4}: {m_i[k]:.0f}")

print(f"\nВыбрана минимальная масса осадка m = {m_allowed:,.0f} кг")
print(f"Объём осадка V                    = {V_m3:.2f} м³")
print(f"Высота слоя h                     = {h_m*100:.2f} см\n")

print("Концентрации после смешивания Cсм (мг/кг):")
for k in ['Cu', 'NO3', 'Mn', 'V']:
    print(f"  {k:4}: {C_sm[k]:.2f}  (ПДК = {PDK[k]})")

print("\nОтвет:")
print(f"На участке площадью {S_ha} га допустимо разместить {m_allowed:,.0f} кг "
      f"осадка (объём {V_m3:.2f} м³) слоем {h_m*100:.2f} см.")
print("После перемешивания с почвой концентрация веществ составит:")
print(f"  Ссм(Cu)   = {C_sm['Cu']:.2f} мг/кг, "
      f"Ссм(NO3⁻) = {C_sm['NO3']:.2f} мг/кг, "
      f"Ссм(Mn)   = {C_sm['Mn']:.2f} мг/кг, "
      f"Cсм(V)    = {C_sm['V']:.2f} мг/кг.")